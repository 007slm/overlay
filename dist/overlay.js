define("#overlay/0.9.7/overlay",["#iframe-shim/0.9.2/iframe-shim","#jquery/1.7.2/jquery","#position/0.9.2/position","#widget/0.9.16/widget","#widget/0.9.16/daparser","#widget/0.9.16/auto-render","#base/0.9.16/base","base/0.9.16/aspect","base/0.9.16/attribute","#class/0.9.2/class","#events/0.9.1/events"],function(require,exports,module){function isInDocument(element){return $.contains(document.documentElement,element)}var $=require("#jquery/1.7.2/jquery"),Position=require("#position/0.9.2/position"),Shim=require("#iframe-shim/0.9.2/iframe-shim"),Widget=require("#widget/0.9.16/widget"),Overlay=Widget.extend({attrs:{width:"",height:"",zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:Position.VIEWPORT,baseXY:[0,0]},parentNode:document.body},render:function(){return Overlay.superclass.render.call(this),this._setPosition(),this},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){this._setupShim()},_setPosition:function(align){if(!isInDocument(this.element[0]))return;align||(align=this.get("align"));var isHidden=this.element.css("display")==="none";return isHidden&&this.element.css({visibility:"hidden",display:"block"}),Position.pin({element:this.element,x:align.selfXY[0],y:align.selfXY[1]},{element:align.baseElement,x:align.baseXY[0],y:align.baseXY[1]}),isHidden&&this.element.css({visibility:"",display:"none"}),this},_setupShim:function(){var shim=new Shim(this.element);this.after("show hide",shim.sync,shim);var attrs=Overlay.prototype.attrs;for(var attr in attrs)if(attrs.hasOwnProperty(attr)){if(attr==="parentNode")continue;this.on("change:"+attr,shim.sync,shim)}},_blurHide:function(relativeElements){var that=this,clickFn=function(e){var tempArr=[];tempArr.push(that.element),tempArr=tempArr.concat(relativeElements||[]);for(var i=0;i<tempArr.length;i++)if(e.target===tempArr[i][0])return;that.hide()};$(document).bind("click",function(e){clickFn(e),$(document).unbind("click",clickFn)})},_onRenderWidth:function(val){this.element.css("width",val)},_onRenderHeight:function(val){this.element.css("height",val)},_onRenderZIndex:function(val){this.element.css("zIndex",val)},_onRenderAlign:function(val){this._setPosition(val)},_onRenderVisible:function(val){this.element[val?"show":"hide"]()}});module.exports=Overlay});