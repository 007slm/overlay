define("arale/overlay/1.1.0/mask",["$","./overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.0.0/class","arale/events/1.1.0/events"],function(e,t,i){var s=e("$"),n=e("./overlay"),r=(s.browser||0).msie&&6==s.browser.version,a=s(document.body),o=s(document),l=n.extend({attrs:{width:r?o.outerWidth(!0):"100%",height:r?o.outerHeight(!0):"100%",className:"ui-mask",opacity:.2,backgroundColor:"#000",style:{position:r?"absolute":"fixed",top:0,left:0},align:{baseElement:r?a:void 0}},show:function(){return r&&(this.set("width",o.outerWidth(!0)),this.set("height",o.outerHeight(!0))),l.superclass.show.call(this)},setup:function(){this._setupShim()},_onRenderBackgroundColor:function(e){this.element.css("backgroundColor",e)},_onRenderOpacity:function(e){this.element.css("opacity",e)}});i.exports=new l}),define("arale/overlay/1.1.0/overlay",["$","arale/position/1.0.0/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.0.0/class","arale/events/1.1.0/events"],function(e,t,i){function s(e){return a.contains(document.documentElement,e)}function n(e){a(u.blurOverlays).each(function(t,i){if(i&&i.get("visible")){for(var s=0;i._relativeElements.length>s;s++){var n=a(i._relativeElements[s])[0];if(n===e.target||a.contains(n,e.target))return}i.hide()}})}function r(e,t){for(var i=0;t.length>i;i++)if(e===t[i])return t.splice(i,1),t}var a=e("$"),o=e("arale/position/1.0.0/position"),l=e("arale/iframe-shim/1.0.2/iframe-shim"),h=e("arale/widget/1.1.0/widget"),u=h.extend({attrs:{width:"",height:"",zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:o.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){var e=this;this._setupShim(),this._setupResize(),this.after("show",function(){e._setPosition()})},destroy:function(){return r(this,u.allOverlays),r(this,u.blurOverlays),u.superclass.destroy.call(this)},_setPosition:function(e){if(s(this.element[0])&&(e||(e=this.get("align")),e)){var t="none"===this.element.css("display");return t&&this.element.css({visibility:"hidden",display:"block"}),o.pin({element:this.element,x:e.selfXY[0],y:e.selfXY[1]},{element:e.baseElement,x:e.baseXY[0],y:e.baseXY[1]}),t&&this.element.css({visibility:"",display:"none"}),this}},_setupShim:function(){var e=new l(this.element);this.after("hide _setPosition",e.sync,e);var t=["width","height"];for(var i in t)t.hasOwnProperty(i)&&this.on("change:"+i,e.sync,e);this.before("destroy",e.destroy,e)},_setupResize:function(){u.allOverlays.push(this)},_blurHide:function(e){e=a.makeArray(e),e.push(this.element),this._relativeElements=e,u.blurOverlays.push(this)},_onRenderWidth:function(e){this.element.css("width",e)},_onRenderHeight:function(e){this.element.css("height",e)},_onRenderZIndex:function(e){this.element.css("zIndex",e)},_onRenderAlign:function(e){this._setPosition(e)},_onRenderVisible:function(e){this.element[e?"show":"hide"]()}});u.blurOverlays=[],a(document).on("click",function(e){n(e)});var c;u.allOverlays=[],a(window).resize(function(){c&&clearTimeout(c),c=setTimeout(function(){a(u.allOverlays).each(function(e,t){t&&t.get("visible")&&t._setPosition()})},80)}),i.exports=u});
